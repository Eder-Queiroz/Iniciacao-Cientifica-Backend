// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Teacher {
  id    String @id @default(uuid())
  name  String
  email String

  restrictions Restriction[]
  classrooms   Classroom[]

  @@map("teachers")
}

model Restriction {
  id         String  @id @default(uuid())
  period     String
  day        Int
  teacher    Teacher @relation(fields: [teacher_id], references: [id])
  teacher_id String

  @@map("restrictions")
}

model Discipline {
  id     String @id @default(uuid())
  name   String
  period Int

  classrooms Classroom[]

  @@map("disciplines")
}

model Course {
  id       String @id @default(uuid())
  name     String
  shift    String
  grouping Int

  classes    Class[]
  classrooms Classroom[]

  @@map("courses")
}

model Class {
  id           String @id @default(uuid())
  name         String
  period       Int
  num_students Int
  course       Course @relation(fields: [course_id], references: [id])
  course_id    String

  groups     Groups[]
  rooms      Room[]
  classrooms Classroom[]

  @@map("classes")
}

model Groups {
  id       String  @id @default(uuid())
  group1   String
  group2   String
  group3   String?
  group4   String?
  class    Class   @relation(fields: [class_id], references: [id])
  class_id String

  @@map("groups")
}

model Room {
  id       String  @id @default(uuid())
  name     String
  fixed    Boolean
  building String
  capacity Int
  class    Class?  @relation(fields: [class_id], references: [id])
  class_id String?

  classrooms Classroom[]

  @@map("rooms")
}

model Classroom {
  id            String     @id @default(uuid())
  amount        Int
  duration      Int
  teacher       Teacher    @relation(fields: [teacher_id], references: [id])
  teacher_id    String
  discipline    Discipline @relation(fields: [discipline_id], references: [id])
  discipline_id String
  room          Room       @relation(fields: [room_id], references: [id])
  room_id       String
  course        Course     @relation(fields: [course_id], references: [id])
  course_id     String
  class         Class      @relation(fields: [class_id], references: [id])
  class_id      String

  @@map("classrooms")
}
